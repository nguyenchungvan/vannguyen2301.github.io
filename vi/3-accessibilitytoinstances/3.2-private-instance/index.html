<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.68.3" />
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Cài đặt Java, MVN và triển khai ứng dụng :: Triển khai ứng dụng Spring Boot lên EC2</title>

    
    <link href="/css/nucleus.css?1725043330" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1725043330" rel="stylesheet">
    <link href="/css/hybrid.css?1725043330" rel="stylesheet">
    <link href="/css/featherlight.min.css?1725043330" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1725043330" rel="stylesheet">
    <link href="/css/auto-complete.css?1725043330" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1725043330" rel="stylesheet">
    <link href="/css/theme.css?1725043330" rel="stylesheet">
    <link href="/css/hugo-theme.css?1725043330" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1725043330" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1725043330"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/vi/3-accessibilitytoinstances/3.2-private-instance/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1725043330"></script>
<script type="text/javascript" src="/js/auto-complete.js?1725043330"></script>
<script type="text/javascript">
    
        var baseurl = "\/vi";
    
</script>
<script type="text/javascript" src="/js/search.js?1725043330"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduce/" title="Giới thiệu" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/">
           <b> 1. </b> Giới thiệu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-prerequiste/" title="Các bước chuẩn bị" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-prerequiste/">
           <b> 2. </b> Các bước chuẩn bị
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-prerequiste/2.1-createec2/" title="Chuẩn bị VPC" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-prerequiste/2.1-createec2/">
           <b> 2.1 </b> Chuẩn bị VPC
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-prerequiste/2.2-createec2rds/" title="Tạo EC2 và RDS" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-prerequiste/2.2-createec2rds/">
           <b> 2.2 </b> Tạo EC2 và RDS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-prerequiste/2.2-createec2rds/2.2.1-createec2/" title="Tạo EC2" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-prerequiste/2.2-createec2rds/2.2.1-createec2/">
           <b> 2.2.1 </b> Tạo EC2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-prerequiste/2.2-createec2rds/2.2.2-createrds/" title="Tạo RDS" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-prerequiste/2.2-createec2rds/2.2.2-createrds/">
           <b> 2.2.2 </b> Tạo RDS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-accessibilitytoinstances/" title="Triển khai ứng dụng Spring Boot trên EC2 Instance" class="dd-item 
        parent
        
        
        ">
      <a href="/vi/3-accessibilitytoinstances/">
           <b> 3. </b> Triển khai ứng dụng Spring Boot trên EC2 Instance
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-accessibilitytoinstances/3.1-public-instance/" title="Tạo Kết nối đến máy chủ EC2" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-accessibilitytoinstances/3.1-public-instance/">
           <b> 3.1. </b> Tạo Kết nối đến máy chủ EC2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-accessibilitytoinstances/3.2-private-instance/" title="Cài đặt Java, MVN và triển khai ứng dụng" class="dd-item 
        parent
        active
        
        ">
      <a href="/vi/3-accessibilitytoinstances/3.2-private-instance/">
           <b> 3.2. </b> Cài đặt Java, MVN và triển khai ứng dụng
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6-cleanup/" title="Dọn dẹp tài nguyên  " class="dd-item 
        
        
        
        ">
      <a href="/vi/6-cleanup/">
          <b>4. </b>Dọn dẹp tài nguyên  
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/3-accessibilitytoinstances/3.2-private-instance/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/3-accessibilitytoinstances/3.2-private-instance/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>30-08-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i> <a href="https://www.linkedin.com/in/sutrinh/"  style="color:orange">Nguyễn Chung Văn  </a> <br>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/vi/'>Triển khai ứng dụng Java Spring Boot trên EC2 trong VPC</a> > <a href='/vi/3-accessibilitytoinstances/'>Triển khai ứng dụng Spring Boot trên EC2 Instance</a> > Cài đặt Java, MVN và triển khai ứng dụng
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#cài-đặt-java-và-mvn">Cài đặt Java và MVN</a></li>
        <li><a href="#tải-file-project-từ-máy-tính-lên-ec2-thông-qua-aws-s3">Tải file project từ máy tính lên EC2 thông qua AWS S3</a></li>
        <li><a href="#triển-khai-ứng-dụng-lên-ec2">Triển khai ứng dụng lên EC2</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Cài đặt Java, MVN và triển khai ứng dụng
            </h1>
          

        



	<h3 id="cài-đặt-java-và-mvn">Cài đặt Java và MVN</h3>
<ol>
<li>Chuyển tài khoản root, cập nhật update.</li>
</ol>
<pre><code>  sudo su
  yum update
</code></pre><p><img src="/images/3.connect/06-connect.png" alt="Connect"></p>
<ol start="2">
<li>Cài đặt Java 21</li>
</ol>
<pre><code>  curl -fL -o https://corretto.aws/downloads/latest/amazon-corretto-21-x64-linux-jdk.tar.gz
  export JAVA_HOME=/urs/lib/jvm/java-21-amazon-corretto
  java -version
</code></pre><p><img src="/images/3.connect/07-connect.png" alt="Connect"></p>
<ol start="3">
<li>Cài MVN</li>
</ol>
<pre><code>  sudo wget https://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo -O /etc/yum.repos.d/epel-apache-maven.repo
  sudo sed -i s/\$releasever/6/g /etc/yum.repos.d/epel-apache-maven.repo
  sudo yum install -y apache-maven
  mvn -v
</code></pre><p><img src="/images/3.connect/08-connect.png" alt="Connect"></p>
<h3 id="tải-file-project-từ-máy-tính-lên-ec2-thông-qua-aws-s3">Tải file project từ máy tính lên EC2 thông qua AWS S3</h3>

<div class="notices note" ><p>Trong bài lab này, project được copy từ S3 Bucket đến EC2 server thông qua Internet Gateway và NAT Gateway, có thể dùng VPC Endpoint tăng tăng cường bảo mật, hiệu suất và chi phí khi kết nối các dịch vụ của AWS.</p>
</div>


<div class="notices note" ><p>Để EC2 có thể tải file project từ S3, ta cần gán roles cho EC2 để có thể truy cập vào S3.</p>
</div>

<ol>
<li>Ở trang <a href="https://ap-southeast-1.console.aws.amazon.com/ec2/home?region=ap-southeast-1#Home:">giao diện quản trị của dịch vụ EC2</a>.</li>
</ol>
<ul>
<li>Chọn <strong>Instances</strong>.</li>
<li>Chọn <strong>EC2 Server</strong>.</li>
<li>Chọn <strong>Action</strong>.</li>
<li>Chọn <strong>Security</strong>.</li>
<li>Chọn <strong>Modify IAM role</strong>.</li>
</ul>
<p><img src="/images/3.connect/09-connect.png" alt="Connect"></p>
<ol start="2">
<li>Tạo IAM role</li>
</ol>
<ul>
<li>Chọn <strong>Create new IAM role</strong></li>
</ul>
<p><img src="/images/3.connect/10-connect.png" alt="Connect"></p>
<ul>
<li>Trong mục <strong>Roles</strong> ở <a href="https://us-east-1.console.aws.amazon.com/iam/home?region=ap-southeast-1#/roles">giao diện Identity and Access Management (IAM)</a>, chọn <strong>Create role</strong>.</li>
</ul>
<p><img src="/images/3.connect/11-connect.png" alt="Connect"></p>
<ul>
<li>Ở trang tiếp theo chọn <strong>Trusted entity type</strong> là <strong>AWS service</strong>, mục <strong>Service or use case</strong> chọn <strong>EC2</strong>.</li>
</ul>
<p><img src="/images/3.connect/12-connect.png" alt="Connect"></p>
<ul>
<li>
<p>Bước tiếp theo, chọn quyền <strong>AmazonS3FullAccess</strong> cho EC2, chọn <strong>Next</strong>.</p>
<p><img src="/images/3.connect/13-connect.png" alt="Connect"></p>
</li>
<li>
<p>Điền tên <strong>Role name</strong>, <strong>Description</strong>, và review lại role đã tạo, sau đó chọn <strong>Create role</strong>.</p>
<p><img src="/images/3.connect/14-connect.png" alt="Connect"></p>
<p><img src="/images/3.connect/15-connect.png" alt="Connect"></p>
</li>
</ul>
<ol start="3">
<li>Gán quyền truy cập S3 cho EC2</li>
</ol>
<ul>
<li>
<p>Quay về trang ở <strong>bước 1</strong>, refresh để tải lại các roles.</p>
</li>
<li>
<p>Chọn role <strong>EC2FullAccessS3</strong>.</p>
</li>
<li>
<p>Chọn <strong>Update IAM role</strong>.</p>
<p><img src="/images/3.connect/16-connect.png" alt="Connect">
<img src="/images/3.connect/17-connect.png" alt="Connect"></p>
</li>
</ul>
<ol start="4">
<li>Sao chép project lên server</li>
</ol>
<pre><code>aws s3 cp s3://van-bucket-01/My-Phone.zip /ssm-user
</code></pre>
<div class="notices note" ><p>Nếu EC2 chưa được gán quyền truy cập S3 sẽ xuất hiện lỗi <strong>fatal error: Unable to locate credentials</strong>.</p>
</div>

<p><img src="/images/3.connect/18-connect.png" alt="Connect"></p>
<h3 id="triển-khai-ứng-dụng-lên-ec2">Triển khai ứng dụng lên EC2</h3>
<ol>
<li>Giải nén tệp</li>
</ol>
<pre><code>  unzip myphone
</code></pre><p><img src="/images/3.connect/19-connect.png" alt="Connect"></p>
<ol start="2">
<li>Cấu hình lại file kết nối với database</li>
</ol>
<ul>
<li>Truy cập vào file cấu hình của dự án</li>
</ul>
<pre><code>  nano application.properties
</code></pre><ul>
<li>Sửa lại <strong>url</strong>, <strong>username</strong>, <strong>password</strong> ứng với RDS đã tạo, sau đó lưu lại file.</li>
</ul>
<p><img src="/images/3.connect/22-connect.png" alt="Connect"></p>
<ol start="3">
<li>Chạy project</li>
</ol>
<pre><code>  mvn spring-boot: run
</code></pre><p><img src="/images/3.connect/20-connect.png" alt="Connect"></p>
<ul>
<li>Project đã chạy trên EC2 thành công.</li>
</ul>
<p><img src="/images/3.connect/21-connect.png" alt="Connect"></p>
<ol start="4">
<li>Tạo Application Load Balancer</li>
</ol>
<ul>
<li>Ở trang <a href="https://ap-southeast-1.console.aws.amazon.com/ec2/home?region=ap-southeast-1#Home:">giao diện quản trị của dịch vụ EC2</a>, chọn <strong>Load Balancers</strong>.</li>
<li>Chọn <strong>Create load balancer</strong>.</li>
</ul>
<p><img src="/images/3.connect/23-connect.png" alt="Connect"></p>
<ul>
<li>Chọn <strong>Create</strong> Application Load Balancer.</li>
</ul>
<p><img src="/images/3.connect/24-connect.png" alt="Connect"></p>
<ul>
<li>Điền tên ALB, chọn Scheme <strong>Internet-facing</strong> để có thể kết nối đến trang web đã chạy, chọn Load banlancer IP address type <strong>IPv4</strong>.</li>
</ul>
<p><img src="/images/3.connect/25-connect.png" alt="Connect"></p>
<ul>
<li>Phần <strong>Network mapping</strong>, chọn VPC đã tạo và 2 public subnet ở 2 AZ bên trong VPC để kết nối với ALB.</li>
</ul>
<p><img src="/images/3.connect/26-connect.png" alt="Connect"></p>
<ul>
<li>Chọn <strong>Security group</strong> đã tạo cho ALB.</li>
</ul>
<p><img src="/images/3.connect/27-connect.png" alt="Connect"></p>
<ul>
<li>Trong phần <strong>Listeners and routing</strong>, chọn <strong>Create target group</strong> để tạo Target group cho ALB.</li>
</ul>
<p><img src="/images/3.connect/28-connect.png" alt="Connect"></p>
<ul>
<li>Chọn loại target <strong>Instance</strong> và điền tên <strong>Target group name</strong>.</li>
</ul>
<p><img src="/images/3.connect/29-connect.png" alt="Connect"></p>
<ul>
<li>Chọn <strong>Protocal:Port</strong>, <strong>IP address type</strong>, <strong>Heal check</strong>, sau đó chọn <strong>Next</strong></li>
</ul>
<p><img src="/images/3.connect/30-connect.png" alt="Connect"></p>
<ul>
<li>Thêm instance đang chạy vào target group, sau đó chọn <strong>Create target group</strong>.</li>
</ul>
<p><img src="/images/3.connect/31-connect.png" alt="Connect"></p>
<p><img src="/images/3.connect/32-connect.png" alt="Connect"></p>
<ul>
<li>Quay về trang tạo ALB, refresh lại và chọn target group vừa tạo.</li>
</ul>
<p><img src="/images/3.connect/33-connect.png" alt="Connect"></p>
<ul>
<li>Xem lại các lựa chọn lần nữa và chọn  <strong>Create load balancer</strong>.</li>
</ul>
<p><img src="/images/3.connect/34-connect.png" alt="Connect"></p>
<ul>
<li>Truy cập vào trang web từ DNS của ALB</li>
</ul>
<p><img src="/images/3.connect/35-connect.png" alt="Connect"></p>
<ul>
<li>Kết quả khi triển khai ứng dụng thành công</li>
</ul>
<p><img src="/images/3.connect/36-connect.png" alt="Connect"></p>
<ol start="5">
<li>Restore database từ bản backup</li>
</ol>
<ul>
<li>Ở giao diện session manager của EC2, cài đặt postgresql-client.</li>
</ul>
<pre><code>  yum install postgresql -y
  pg_restore --version
</code></pre><p><img src="/images/3.connect/39-connect.png" alt="Connect"></p>
<ul>
<li>Tiến hành restore lại database từ fileb mybackup.sql</li>
</ul>
<pre><code>  pg_restore -h &lt;RDS-endpoint&gt; -p &lt;port&gt; -U &lt;username&gt; -d &lt;database&gt; -v &lt;filebackup.sql&gt;
</code></pre>
<div class="notices info" ><p>Version của postgresql từ file backup phải trùng với version của postgresql được cài đặt trên EC2.</p>
</div>

<ul>
<li>Sau khi restore, kiểm tra lại trang web.</li>
</ul>
<p><img src="/images/3.connect/40-connect.png" alt="Connect"></p>
<ol start="6">
<li>Tạo Auto Scaling Group</li>
</ol>
<ul>
<li>Vào trang <a href="https://ap-southeast-1.console.aws.amazon.com/ec2/home?region=ap-southeast-1#Home:">giao diện quản trị của dịch vụ EC2</a>.</li>
<li>Chọn <strong>Instances</strong>.</li>
<li>Chọn <strong>EC2 Server</strong>.</li>
<li>Chọn <strong>Action</strong>.</li>
<li>Chọn <strong>Image and templates</strong>.</li>
<li>Chọn <strong>Create image</strong>.</li>
</ul>
<p><img src="/images/3.connect/37-connect.png" alt="Connect"></p>
<ul>
<li>Điền tên image cần tạo và mô tả.</li>
</ul>
<p><img src="/images/3.connect/38-connect.png" alt="Connect"></p>
<ul>
<li>Giữ các cấu hình mặc định, chọn <strong>Create image</strong>.</li>
</ul>
<p><img src="/images/3.connect/41-connect.png" alt="Connect"></p>
<ul>
<li>Chuyển sang <a href="https://ap-southeast-1.console.aws.amazon.com/ec2/home?region=ap-southeast-1#Home:">giao diện quản trị của dịch vụ EC2</a>, chọn <strong>Auto Scaling Group</strong>, chọn <strong>Create Auto Scaling Group</strong>.</li>
</ul>
<p><img src="/images/3.connect/42-connect.png" alt="Connect"></p>
<ul>
<li>Điền tên Auto Scaling Group và chọn <strong>Create launch template</strong>.</li>
</ul>
<p><img src="/images/3.connect/43-connect.png" alt="Connect"></p>
<ul>
<li>Ở giao diện tạo template, điền tên template và mô tả.</li>
</ul>
<p><img src="/images/3.connect/44-connect.png" alt="Connect"></p>
<ul>
<li>
<p>Chọn <strong>Application and OS Images</strong> là AMI vừa tạo ở trên.</p>
<p><img src="/images/3.connect/45-connect.png" alt="Connect"></p>
</li>
<li>
<p>Chọn <strong>Instance type</strong> và <strong>Key pair</strong> mà bạn muốn.</p>
</li>
</ul>
<p><img src="/images/3.connect/46-connect.png" alt="Connect"></p>
<ul>
<li>Để mặc định ở <strong>Network settings</strong>.</li>
</ul>
<p><img src="/images/3.connect/47-connect.png" alt="Connect"></p>
<ul>
<li>Kiểm tra lại các lựa chọn một lần nữa, chọn <strong>Create launch template</strong>.</li>
</ul>
<p><img src="/images/3.connect/48-connect.png" alt="Connect"></p>
<ul>
<li>Chuyển sang trang tạo ASG, refresh lại <strong>Launch template</strong>, chọn launch template vừa tạo.</li>
<li>Chọn <strong>Next</strong>.</li>
</ul>
<p><img src="/images/3.connect/49-connect.png" alt="Connect"></p>
<ul>
<li>
<p>Ở trang tiếp theo, trong <strong>Network</strong> chọn VPC của bài lab, chọn các 2 private subnet cần tạo EC2 bên trong.</p>
<p><img src="/images/3.connect/50-connect.png" alt="Connect"></p>
</li>
<li>
<p>Trong mục <strong>Load balancing</strong>, Chọn ALB đã tạo, sau đó chọn <strong>Next</strong>.</p>
</li>
</ul>
<p><img src="/images/3.connect/51-connect.png" alt="Connect"></p>
<p><img src="/images/3.connect/52-connect.png" alt="Connect"></p>
<ul>
<li>Điền số lượng EC2 bạn muốn tạo, theo kiến trúc ta cần 2 EC2 ở 2 AZ khác nhau. Điền số lượng EC2 duy trì tối thiểu, số lượng EC2 triển khai tối đa.</li>
</ul>
<p><img src="/images/3.connect/52-connect.png" alt="Connect"></p>
<ul>
<li>Tiếp tục chọn <strong>Next</strong> ở các <strong>Step 5</strong> và <strong>Step 6</strong>.</li>
<li>Xem lại các cài đặt một lần nữa, chọn <strong>Create Auto Scaling Group</strong>.</li>
</ul>
<p><img src="/images/3.connect/54-connect.png" alt="Connect"></p>
<ul>
<li>Sau khi tạo xong cần Attach EC2 ban đầu vào ASG.</li>
<li>Chọn <strong>Instances</strong>.</li>
<li>Chọn <strong>EC2 Server</strong>.</li>
<li>Chọn <strong>Actions</strong>.</li>
<li>Chọn <strong>Instances settings</strong>.</li>
<li>Chọn <strong>Attach to Auto Scaling Group</strong>.</li>
</ul>
<p><img src="/images/3.connect/56-connect.png" alt="Connect"></p>
<ul>
<li>Chọn ASG vừa tạo.</li>
</ul>
<p><img src="/images/3.connect/57-connect.png" alt="Connect"></p>
<ul>
<li>Sau khi gán thành công, ở giao diện <strong>Instance</strong>, xóa instance còn thừa.</li>
</ul>
<p><img src="/images/3.connect/55-connect.png" alt="Connect"></p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/vi/3-accessibilitytoinstances/3.1-public-instance/" title="Tạo Kết nối đến máy chủ EC2"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/vi/6-cleanup/" title="Dọn dẹp tài nguyên  " style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1725043330"></script>
    <script src="/js/perfect-scrollbar.min.js?1725043330"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1725043330"></script>
    <script src="/js/jquery.sticky.js?1725043330"></script>
    <script src="/js/featherlight.min.js?1725043330"></script>
    <script src="/js/highlight.pack.js?1725043330"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1725043330"></script>
    <script src="/js/learn.js?1725043330"></script>
    <script src="/js/hugo-learn.js?1725043330"></script>

    <link href="/mermaid/mermaid.css?1725043330" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1725043330"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
